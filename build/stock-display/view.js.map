{"version":3,"file":"stock-display/view.js","mappings":"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","sources":["webpack://gb-blocks/./src/stock-display/view.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    const stockTrackers = document.querySelectorAll('.stock-tracker-root');\n\n    stockTrackers.forEach(function(tracker) {\n        let activeTab = 'indices';\n        const tableContainer = tracker.querySelector('.stock-table-container');\n        const loadingDiv = tracker.querySelector('.stock-loading');\n\n        // Initialize tabs\n        const tabs = tracker.querySelectorAll('.stock-tab');\n        tabs.forEach((tab) => {\n            tab.addEventListener('click', () => {\n                tabs.forEach((t) => t.classList.remove('active'));\n                tab.classList.add('active');\n                activeTab = tab.dataset.tab;\n                fetchStocks();\n            });\n        });\n\n        async function fetchStocks() {\n            try {\n                if (!loadingDiv || !tableContainer) return;\n\n                loadingDiv.style.display = 'block';\n                tableContainer.style.display = 'none';\n\n                // Fetch JSON from src directory\n                const response = await fetch(gbBlocksStockTrackerData.jsonUrl);\n                if (!response.ok) {\n                    throw new Error(`HTTP error! Status: ${response.status}`);\n                }\n\n                const data = await response.json();\n                renderStocks(data[activeTab] || []);\n\n                loadingDiv.style.display = 'none';\n                tableContainer.style.display = 'block';\n            } catch (error) {\n                console.error('Error loading stocks:', error);\n                loadingDiv.textContent = 'Error loading stocks data. Please try again.';\n            }\n        }\n\n\t\tfunction renderStocks( stocks ) {\n\t\t\tconst tbody = tableContainer.querySelector( 'tbody' );\n\t\t\ttbody.innerHTML = stocks\n\t\t\t\t.map( ( stock ) => {\n\t\t\t\t\t// Generare a random number between -10 to +10\n\t\t\t\t\tconst randomChange = Math.random() * 2 - 1;\n\t\t\t\t\tconst ltp = stock.ltp + randomChange * stock.ltp * 0.1;\n\t\t\t\t\tconst chg = stock.chg + randomChange * stock.chg * 0.1;\n\t\t\t\t\tconst chgPercent = stock.chg_percent + randomChange * stock.chg_percent * 0.1;\n\t\t\t\t\tconst adRatio = stock.ad_ratio + randomChange * stock.ad_ratio * 0.1;\n\t\t\t\t\treturn `\n                             <tr>\n                            <td class=\"stock-name\">${ stock.name }</td>\n                            <td class=\"stock-ltp\">${\n\t\t\t\t\t\t\t\t! isNaN( ltp ) ? ltp.toFixed( 2 ) : 'N/A'\n\t\t\t\t\t\t\t}</td>\n                            <td class=\"stock-chg ${\n\t\t\t\t\t\t\t\tchg >= 0 ? 'positive' : 'negative'\n\t\t\t\t\t\t\t}\">\n                                ${ chg >= 0 ? '+' : '' }${\n\t\t\t\t\t\t\t\t\t! isNaN( chg ) ? chg.toFixed( 2 ) : 'N/A'\n\t\t\t\t\t\t\t\t}\n                            </td>\n                            <td class=\"stock-percent ${\n\t\t\t\t\t\t\t\tchgPercent >= 0 ? 'positive' : 'negative'\n\t\t\t\t\t\t\t}\">\n                                ${ chgPercent >= 0 ? '+' : '' }${\n\t\t\t\t\t\t\t\t\t! isNaN( chgPercent )\n\t\t\t\t\t\t\t\t\t\t? chgPercent.toFixed( 2 )\n\t\t\t\t\t\t\t\t\t\t: 'N/A'\n\t\t\t\t\t\t\t\t}%\n                            </td>\n                            <td class=\"stock-ratio\">${\n\t\t\t\t\t\t\t\t! isNaN( adRatio )\n\t\t\t\t\t\t\t\t\t? adRatio.toFixed( 2 )\n\t\t\t\t\t\t\t\t\t: 'N/A'\n\t\t\t\t\t\t\t}</td>\n                            </tr>\n                             `;\n\t\t\t\t} )\n\t\t\t\t.join( '' );\n\t\t}\n\n\t\t// Initial fetch\n\t\tfetchStocks();\n\n\t\t// Refresh every minute\n\t\tsetInterval( fetchStocks, 5000 );\n\t} );\n} );\n"],"names":["document","addEventListener","stockTrackers","querySelectorAll","forEach","tracker","activeTab","tableContainer","querySelector","loadingDiv","tabs","tab","t","classList","remove","add","dataset","fetchStocks","style","display","response","fetch","gbBlocksStockTrackerData","jsonUrl","ok","Error","status","data","json","renderStocks","error","console","textContent","stocks","tbody","innerHTML","map","stock","randomChange","Math","random","ltp","chg","chgPercent","chg_percent","adRatio","ad_ratio","name","isNaN","toFixed","join","setInterval"],"sourceRoot":""}